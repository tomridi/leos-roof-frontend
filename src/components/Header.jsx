// src/components/Header.jsx
import { useEffect, useState } from 'react';
//import { useLocation } from '@astrojs/router/client'; // Optional if using client-side routing

export default function Header() {
  const [scrolled, setScrolled] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  // For active link highlighting
  const path = window?.location?.pathname;

  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 70);
    };

    handleScroll(); // Run on load
    window.addEventListener('scroll', handleScroll);

    const handleResize = () => {
      if (window.innerWidth <= 768) {
        setScrolled(false); // optional, depending on design
      }
    };

    window.addEventListener('resize', handleResize);
    return () => {
      window.removeEventListener('scroll', handleScroll);
      window.removeEventListener('resize', handleResize);
    };
  }, []);

  const navLinks = [
    { href: '/services/', label: 'Services' },
    { href: '/about/', label: 'About' },
    { href: '/location/', label: 'Location' },
    { href: '/gallery/', label: 'Gallery' },
    { href: '/contact/', label: 'Contact' },
  ];

  const linkClasses = (href) =>
    `transition ease-in-out duration-300 hover:text-primary ${
      path === href ? 'text-primary' : ''
    }`;

  return (
    <header
      id="main-header"
      className={`fixed top-0 left-0 w-full z-50 font-gothic tracking-wider text-base transition-all duration-300 ease-in-out shadow-xl uppercase ${
        scrolled
          ? 'bg-white text-light-brown py-3 shadow-md'
          : 'bg-light-brown text-white py-5'
      }`}
    >
      {/* Desktop */}
      <nav className="hidden md:flex container mx-auto justify-between items-center px-4 md:px-0">
        <a
        href="/"
        className={`transition-all duration-300 ease-in-out ${
            scrolled ? 'text-light-brown' : 'text-white'
        }`}
        >
        <svg
            id="header-logo"
            className={`transition-all duration-300 ease-in-out ${
              scrolled ? 'h-10' : 'h-15'
            }`}
            viewBox="0 0 334 72"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
        >
          <g 
            id="logo-text" 
            className={`transition-all duration-300 ease-in-out ${
              scrolled ? 'opacity-0 scale-0' : 'opacity-100 scale-100 md:block'
            }`} 
            clipPath="url(#clip0_1717_477)"
          >
            <path d="M192.381 26.1817V29.4715H190V21.1679H194.441C195.26 21.1679 195.917 21.247 196.414 21.4001C196.91 21.5582 197.32 21.8447 197.646 22.2596C197.972 22.6745 198.133 23.1389 198.133 23.6526C198.133 24.6504 197.548 25.3666 196.38 25.7964L198.245 29.4665H195.63L194.081 26.1767H192.386L192.381 26.1817ZM192.381 22.6498V24.764H193.833C194.305 24.764 194.651 24.7344 194.865 24.68C195.079 24.6257 195.269 24.5022 195.44 24.3145C195.605 24.1268 195.693 23.9094 195.693 23.6674C195.693 23.4254 195.61 23.2278 195.44 23.045C195.274 22.8622 195.089 22.7486 194.894 22.7091C194.7 22.6696 194.329 22.6449 193.784 22.6449H192.386L192.381 22.6498Z" />
            <path d="M209.611 29.5999C208.253 29.5999 207.201 29.18 206.456 28.3403C205.711 27.5005 205.34 26.483 205.34 25.2925C205.34 24.1021 205.715 23.0697 206.47 22.2596C207.225 21.4495 208.296 21.0445 209.694 21.0445C211.092 21.0445 212.168 21.4791 212.884 22.3436C213.6 23.208 213.96 24.2009 213.96 25.3123C213.96 26.5176 213.59 27.5302 212.85 28.36C212.11 29.185 211.033 29.5999 209.611 29.5999ZM209.68 22.6301C208.438 22.6301 207.819 23.5241 207.819 25.3172C207.819 27.1103 208.438 28.0093 209.68 28.0093C210.921 28.0093 211.481 27.1153 211.481 25.3222C211.481 23.5291 210.882 22.6301 209.68 22.6301Z" />
            <path d="M225.361 29.5999C224.002 29.5999 222.95 29.18 222.205 28.3403C221.46 27.5005 221.09 26.483 221.09 25.2925C221.09 24.1021 221.465 23.0697 222.22 22.2596C222.975 21.4495 224.046 21.0445 225.444 21.0445C226.841 21.0445 227.918 21.4791 228.633 22.3436C229.349 23.208 229.71 24.2009 229.71 25.3123C229.71 26.5176 229.34 27.5302 228.599 28.36C227.859 29.185 226.783 29.5999 225.361 29.5999ZM225.429 22.6301C224.187 22.6301 223.569 23.5241 223.569 25.3172C223.569 27.1103 224.187 28.0093 225.429 28.0093C226.671 28.0093 227.231 27.1153 227.231 25.3222C227.231 23.5291 226.632 22.6301 225.429 22.6301Z" />
            <path d="M244.5 22.8128H239.771V24.6751H243.506V26.2261H239.771V29.4715H237.317V21.1679H244.5V22.8079V22.8128Z"/>
            <path d="M254.133 21.1679V29.4665H251.771V21.1679H254.133Z"/>
            <path d="M269.994 21.1679V29.4665H267.978L264.023 23.86C264.028 24.0033 264.033 24.0971 264.038 24.1416C264.058 24.2849 264.067 24.4034 264.067 24.5022V29.4715H262.226V21.1679H264.778L268.216 26.0631C268.187 25.8211 268.173 25.6334 268.173 25.5099V21.1679H269.999H269.994Z" />
            <path d="M285.948 25.0307V29.4715H284.867C284.789 29.1603 284.677 28.8392 284.531 28.5181C283.81 29.2393 282.895 29.5999 281.775 29.5999C280.455 29.5999 279.432 29.2146 278.697 28.4391C277.966 27.6636 277.596 26.6608 277.596 25.4358C277.596 24.112 277.986 23.0499 278.77 22.2497C279.554 21.4446 280.615 21.0445 281.955 21.0445C283.08 21.0445 283.985 21.3063 284.677 21.8249C285.369 22.3436 285.787 23.0351 285.943 23.8996L283.693 24.1416C283.508 23.1339 282.929 22.635 281.955 22.635C281.312 22.635 280.83 22.8721 280.499 23.3513C280.172 23.8255 280.007 24.5071 280.007 25.3913C280.007 26.2755 280.182 26.893 280.538 27.3425C280.893 27.792 281.4 28.0192 282.052 28.0192C282.476 28.0192 282.856 27.9056 283.187 27.6784C283.518 27.4512 283.688 27.0906 283.688 26.5917H281.789V25.0406H285.938L285.948 25.0307Z" />
            <path d="M307.425 24.9418C307.191 25.8705 306.641 26.7497 305.774 27.5796C306.08 27.8414 306.426 27.9698 306.811 27.9698C306.947 27.9698 307.152 27.9599 307.425 27.9352V29.4122C307.059 29.4912 306.723 29.5258 306.412 29.5258C305.511 29.5258 304.78 29.2591 304.23 28.7305C303.309 29.3332 302.253 29.6394 301.069 29.6394C299.779 29.6394 298.814 29.3727 298.181 28.8441C297.548 28.3106 297.232 27.708 297.232 27.0263C297.232 25.9248 298.065 25.1246 299.735 24.6257C299.345 24.2206 299.092 23.9045 298.975 23.6822C298.858 23.455 298.8 23.2179 298.8 22.961C298.8 22.3782 299.082 21.904 299.652 21.5483C300.217 21.1877 300.972 21.0099 301.917 21.0099C302.861 21.0099 303.607 21.2075 304.132 21.5977C304.658 21.9879 304.921 22.4819 304.921 23.0697C304.921 23.9835 304.288 24.6553 303.022 25.0851L304.444 26.3546C304.853 25.989 305.15 25.4457 305.335 24.7146L307.429 24.9517L307.425 24.9418ZM300.938 25.7173C300.149 25.9396 299.754 26.3299 299.754 26.8782C299.754 27.2042 299.896 27.4857 300.183 27.7327C300.465 27.9797 300.85 28.1032 301.327 28.1032C301.941 28.1032 302.501 27.9352 303.012 27.5993L300.938 25.7223V25.7173ZM301.999 24.0527C302.72 23.8353 303.081 23.5143 303.081 23.0895C303.081 22.8622 302.983 22.6696 302.788 22.5066C302.594 22.3436 302.326 22.2645 301.98 22.2645C301.702 22.2645 301.473 22.3238 301.293 22.4424C301.113 22.5609 301.025 22.7141 301.025 22.8968C301.025 23.124 301.211 23.3908 301.581 23.702L302.004 24.0527H301.999Z" />
            <path d="M192.381 44.5818V47.8716H190V39.573H194.441C195.26 39.573 195.917 39.652 196.414 39.8052C196.91 39.9632 197.32 40.2497 197.646 40.6647C197.972 41.0796 198.133 41.5439 198.133 42.0576C198.133 43.0554 197.548 43.7717 196.38 44.2014L198.245 47.8716H195.63L194.081 44.5818H192.386H192.381ZM192.381 41.0499V43.1641H193.833C194.305 43.1641 194.651 43.1345 194.865 43.0801C195.079 43.0258 195.269 42.9023 195.44 42.7146C195.605 42.5269 195.693 42.3096 195.693 42.0675C195.693 41.8255 195.61 41.6279 195.44 41.4451C195.274 41.2624 195.089 41.1487 194.894 41.1092C194.7 41.0697 194.329 41.045 193.784 41.045H192.386L192.381 41.0499Z" />
            <path d="M213.235 41.1537H208.423V42.8579H212.202V44.4188H208.423V46.2316H213.235V47.8716H206.022V39.573H213.235V41.1537Z"/>
            <path d="M225.19 47.8716L222.697 41.1043V47.8716H220.715V39.573H224.401L226.174 44.5423L228.039 39.573H231.736V47.8716H229.354V41.1043L226.812 47.8716H225.19Z" />
            <path d="M243.599 48C242.24 48 241.188 47.5801 240.443 46.7404C239.698 45.9007 239.328 44.8831 239.328 43.6926C239.328 42.5022 239.703 41.4698 240.458 40.6597C241.213 39.8496 242.284 39.4446 243.682 39.4446C245.079 39.4446 246.156 39.8793 246.871 40.7437C247.587 41.6081 247.948 42.601 247.948 43.7124C247.948 44.9177 247.578 45.9303 246.837 46.7602C246.097 47.5851 245.021 48 243.599 48ZM243.667 41.0302C242.425 41.0302 241.807 41.9243 241.807 43.7173C241.807 45.5104 242.425 46.4094 243.667 46.4094C244.909 46.4094 245.469 45.5154 245.469 43.7223C245.469 41.9292 244.87 41.0302 243.667 41.0302Z" />
            <path d="M255.555 39.573H258.637C259.894 39.573 260.829 39.7162 261.447 40.0027C262.061 40.2892 262.616 40.7388 263.103 41.3611C263.59 41.9786 263.834 42.7591 263.834 43.7075C263.834 44.8979 263.405 45.8858 262.553 46.6861C261.7 47.4813 260.527 47.8814 259.027 47.8814H255.555V39.5829V39.573ZM257.878 41.0993V46.3107H258.852C259.714 46.3107 260.352 46.0439 260.77 45.5154C261.189 44.9868 261.399 44.3644 261.399 43.6531C261.399 43.1493 261.277 42.685 261.038 42.2552C260.8 41.8255 260.502 41.5291 260.147 41.3562C259.791 41.1833 259.368 41.0993 258.871 41.0993H257.873H257.878Z" />
            <path d="M278.658 41.1537H273.846V42.8579H277.625V44.4188H273.846V46.2316H278.658V47.8716H271.445V39.573H278.658V41.1537Z"/>
            <path d="M288.539 46.2316H292.557V47.8716H286.143V39.573H288.539V46.2316Z"/>
            <path d="M302.189 39.573V47.8716H299.827V39.573H302.189Z" />
            <path d="M318.046 39.573V47.8716H316.03L312.075 42.2651C312.08 42.4083 312.085 42.5022 312.09 42.5467C312.109 42.6899 312.119 42.8085 312.119 42.9072V47.8765H310.278V39.5779H312.83L316.268 44.4731C316.239 44.2311 316.225 44.0434 316.225 43.9199V39.5779H318.051L318.046 39.573Z" />
            <path d="M334 43.4308V47.8716H332.919C332.841 47.5604 332.729 47.2393 332.583 46.9182C331.862 47.6394 330.947 48 329.826 48C328.507 48 327.484 47.6147 326.749 46.8392C326.018 46.0637 325.648 45.0609 325.648 43.8359C325.648 42.5121 326.038 41.4501 326.822 40.6498C327.606 39.8447 328.667 39.4446 330.007 39.4446C331.132 39.4446 332.037 39.7064 332.729 40.225C333.42 40.7437 333.839 41.4352 333.995 42.2997L331.745 42.5417C331.56 41.534 330.981 41.0351 330.007 41.0351C329.364 41.0351 328.882 41.2722 328.551 41.7514C328.224 42.2256 328.059 42.9072 328.059 43.7914C328.059 44.6756 328.234 45.2931 328.589 45.7426C328.945 46.1921 329.451 46.4193 330.104 46.4193C330.528 46.4193 330.908 46.3057 331.239 46.0785C331.57 45.8513 331.74 45.4907 331.74 44.9918H329.841V43.4407H333.99L334 43.4308Z" />
            
          </g>

          <g id="logo-main" clipPath="url(#clip1_1717_477)">
            <path d="M166 32.2707L163.891 27.8675L152.632 33.2911L106.623 11.1179V1.44863H100.736V18.9919L106.19 16.3274L147.009 35.9998L82.9937 66.8471L18.9849 35.9998L83 5.15257L97.8929 12.3274V6.91005L84.0544 0.239182C83.3891 -0.0820783 82.6109 -0.0820783 81.9456 0.239182L13.3616 33.2911L2.10873 27.8675L0 32.2707L7.7383 35.9998L0 39.7289L2.10873 44.1321L13.3679 38.7085L81.9519 71.7604C82.2845 71.9179 82.6423 71.9998 83.0063 71.9998C83.3703 71.9998 83.728 71.9179 84.0606 71.7604L152.645 38.7085L163.904 44.1321L166.013 39.7289L158.274 35.9998L166.013 32.2707H166Z" />
            <path d="M64.5862 51.9433L63.695 51.5842C59.0885 49.7323 55.2476 48.2142 51.6075 46.7968L51.1933 46.6331V25.2283L51.6138 25.0646C53.4777 24.3465 54.394 23.9874 56.1952 23.2756L57.0864 22.9228V44.5543C59.2014 45.1843 61.4545 45.8709 64.1281 46.6835L64.5925 46.822V51.9307L64.5862 51.9433Z" />
            <path d="M79.2219 57.8079L78.3307 57.4551C74.2827 55.8551 70.1844 54.2047 66.7075 52.8L66.2996 52.6362V19.2378L66.7075 19.074C70.3602 17.6 74.3015 16.0126 78.3307 14.4189L79.2219 14.0661V20.5984L78.7574 20.737C76.7115 21.348 74.5086 22.0094 72.0421 22.7654V33.4866C73.7304 33.4173 74.7785 33.3795 76.6801 33.3039L77.3579 33.2787V39.4268L76.6738 39.389C74.7722 39.2819 73.7304 39.2252 72.0484 39.1307V49.1213C74.5337 49.8772 76.7366 50.5449 78.7637 51.1496L79.2281 51.2882V57.8205L79.2219 57.8079Z" />
            <path d="M104.313 50.9291C103.623 50.9291 102.995 50.7465 102.462 50.3874C101.414 49.6756 100.849 48.3591 100.88 46.6835V40.863L106.654 40.0819V45.6315L110.545 44.4976L111.003 39.6472C108.261 38.211 105.688 36.5858 102.951 34.5575C101.345 33.3858 100.799 32.126 100.887 29.7386L100.874 24.485C100.843 22.9858 101.37 21.8142 102.349 21.2094C103.416 20.548 104.903 20.6299 106.435 21.4236L111.029 23.1874C114.606 24.4157 116.439 26.3244 116.326 28.7118V32.674L110.495 31.7984V27.3386L106.648 26.2173V30.9606C109.278 33.052 111.713 34.6583 114.091 35.8677C115.541 36.5354 116.326 37.2031 116.326 38.8157V42.7402C116.275 45.2787 114.487 47.3071 111.154 48.5984L106.296 50.463C105.6 50.7591 104.928 50.9102 104.307 50.9102L104.313 50.9291Z" />
            <path d="M88.3534 14.0661C84.8138 14.0661 81.9456 17.2031 81.9456 21.0772V50.778C81.9456 54.6835 84.8389 57.8457 88.4099 57.8457C93.6064 57.8457 97.8176 53.2409 97.8176 47.5591V24.4157C97.8176 18.7024 93.5813 14.0724 88.3597 14.0724L88.3534 14.0661ZM92.9286 46.8787C92.9286 49.4488 92.0939 50.8157 91.0772 51.5339C90.2488 52.1197 89.1944 52.3213 88.322 51.937C87.3618 51.5087 86.8158 50.652 86.8158 49.3606V21.7386C86.8158 20.9827 87.4811 19.8614 88.4664 19.5654C89.4454 19.3134 90.2801 19.4646 90.9705 19.7669C92.8972 20.5732 92.9286 22.3433 92.9286 24.7811V46.8787Z" />        
          </g>
          <defs>
          <clipPath id="clip0_1717_477">
          <rect width="144" height="27"  transform="translate(190 21)"/>
          </clipPath>
          <clipPath id="clip1_1717_477">
          <rect width="166" height="72" />
          </clipPath>
          </defs>
        </svg>
        </a>

        <ul className="hidden md:flex space-x-10">
          {navLinks.map((link) => (
            <li key={link.href}>
              <a href={link.href} className={linkClasses(link.href)}>
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </nav>

      {/* Mobile */}
      <nav className="md:hidden container mx-auto flex items-center px-4 h-10">
        <button
          onClick={() => setMobileMenuOpen((prev) => !prev)}
          className="text-[40px]"
        >
          <svg className="w-[35px]" viewBox="0 0 21 14" fill="none">
            <path d="M0 1H21" stroke="currentColor" strokeWidth="1.6" />
            <path d="M0 7H21" stroke="currentColor" strokeWidth="1.6" />
            <path d="M0 13H21" stroke="currentColor" strokeWidth="1.6" />
          </svg>
        </button>
        <div className="flex-grow" />
        <a href="/">
        <svg
            id="header-logo"
            className={`h-10`}
            viewBox="0 0 170 72"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
        >
          <g id="logo-main" clipPath="url(#clip1_1717_477)">
            <path d="M166 32.2707L163.891 27.8675L152.632 33.2911L106.623 11.1179V1.44863H100.736V18.9919L106.19 16.3274L147.009 35.9998L82.9937 66.8471L18.9849 35.9998L83 5.15257L97.8929 12.3274V6.91005L84.0544 0.239182C83.3891 -0.0820783 82.6109 -0.0820783 81.9456 0.239182L13.3616 33.2911L2.10873 27.8675L0 32.2707L7.7383 35.9998L0 39.7289L2.10873 44.1321L13.3679 38.7085L81.9519 71.7604C82.2845 71.9179 82.6423 71.9998 83.0063 71.9998C83.3703 71.9998 83.728 71.9179 84.0606 71.7604L152.645 38.7085L163.904 44.1321L166.013 39.7289L158.274 35.9998L166.013 32.2707H166Z" />
            <path d="M64.5862 51.9433L63.695 51.5842C59.0885 49.7323 55.2476 48.2142 51.6075 46.7968L51.1933 46.6331V25.2283L51.6138 25.0646C53.4777 24.3465 54.394 23.9874 56.1952 23.2756L57.0864 22.9228V44.5543C59.2014 45.1843 61.4545 45.8709 64.1281 46.6835L64.5925 46.822V51.9307L64.5862 51.9433Z" />
            <path d="M79.2219 57.8079L78.3307 57.4551C74.2827 55.8551 70.1844 54.2047 66.7075 52.8L66.2996 52.6362V19.2378L66.7075 19.074C70.3602 17.6 74.3015 16.0126 78.3307 14.4189L79.2219 14.0661V20.5984L78.7574 20.737C76.7115 21.348 74.5086 22.0094 72.0421 22.7654V33.4866C73.7304 33.4173 74.7785 33.3795 76.6801 33.3039L77.3579 33.2787V39.4268L76.6738 39.389C74.7722 39.2819 73.7304 39.2252 72.0484 39.1307V49.1213C74.5337 49.8772 76.7366 50.5449 78.7637 51.1496L79.2281 51.2882V57.8205L79.2219 57.8079Z" />
            <path d="M104.313 50.9291C103.623 50.9291 102.995 50.7465 102.462 50.3874C101.414 49.6756 100.849 48.3591 100.88 46.6835V40.863L106.654 40.0819V45.6315L110.545 44.4976L111.003 39.6472C108.261 38.211 105.688 36.5858 102.951 34.5575C101.345 33.3858 100.799 32.126 100.887 29.7386L100.874 24.485C100.843 22.9858 101.37 21.8142 102.349 21.2094C103.416 20.548 104.903 20.6299 106.435 21.4236L111.029 23.1874C114.606 24.4157 116.439 26.3244 116.326 28.7118V32.674L110.495 31.7984V27.3386L106.648 26.2173V30.9606C109.278 33.052 111.713 34.6583 114.091 35.8677C115.541 36.5354 116.326 37.2031 116.326 38.8157V42.7402C116.275 45.2787 114.487 47.3071 111.154 48.5984L106.296 50.463C105.6 50.7591 104.928 50.9102 104.307 50.9102L104.313 50.9291Z" />
            <path d="M88.3534 14.0661C84.8138 14.0661 81.9456 17.2031 81.9456 21.0772V50.778C81.9456 54.6835 84.8389 57.8457 88.4099 57.8457C93.6064 57.8457 97.8176 53.2409 97.8176 47.5591V24.4157C97.8176 18.7024 93.5813 14.0724 88.3597 14.0724L88.3534 14.0661ZM92.9286 46.8787C92.9286 49.4488 92.0939 50.8157 91.0772 51.5339C90.2488 52.1197 89.1944 52.3213 88.322 51.937C87.3618 51.5087 86.8158 50.652 86.8158 49.3606V21.7386C86.8158 20.9827 87.4811 19.8614 88.4664 19.5654C89.4454 19.3134 90.2801 19.4646 90.9705 19.7669C92.8972 20.5732 92.9286 22.3433 92.9286 24.7811V46.8787Z" />        
          </g>
        </svg>
        </a>
      </nav>

      {/* Mobile Menu */}
     <div
        id="mobile-menu"
        className={`md:hidden px-4 absolute top-full left-0 w-full h-[100vh] bg-primary shadow-lg py-4 transition-all duration-300 ease-in-out ${
          mobileMenuOpen
            ? 'opacity-100 translate-x-0 pointer-events-auto'
            : 'opacity-0 -translate-x-full pointer-events-none'
        }`}
      >
        <ul className="flex flex-col items-left">
          <li className="border-b border-white/20 py-5">
            <a href="/">Home</a>
          </li>
          {navLinks.map((link) => (
            <li key={link.href} className="border-b border-white/20 py-5">
              <a href={link.href}>{link.label}</a>
            </li>
          ))}
        </ul>
      </div>
    </header>
  );
}